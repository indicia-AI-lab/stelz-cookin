{% comment %}
  SOCIALS FEED - Instagram Marquee Section
  Exact match met React component styling
  Volledig aanpasbaar via Shopify Theme Editor
{% endcomment %}

<style>
/* ==========================================================================
   SOCIALS FEED (Shopify) — match Lovable slider look
   Notes:
   - No @import here (Shopify editor can drop inline styles when @import is present)
   - Scoped to this section id to avoid theme overrides
   ========================================================================= */

#socials-feed-{{ section.id }}.socials-feed-section {
  /* Theme token fallbacks */
  --sf-bg: hsl(var(--ui-color-bg, 45 30% 96%));
  --sf-fg: hsl(var(--ui-color-fg, 30 25% 15%));
  --sf-primary: hsl(var(--ui-color-primary, 45 72% 47%));
  --sf-primary-fg: hsl(var(--ui-color-primary-fg, 0 0% 100%));
  --sf-muted: hsl(var(--ui-color-muted, 30 10% 85%));
  --sf-muted-fg: hsl(var(--ui-color-muted-fg, 30 15% 40%));
  --sf-border: hsl(var(--ui-color-border, 30 15% 85%));

  position: relative;
  padding: clamp(4rem, 3rem + 2vw, 6rem) 0;
  background: var(--sf-bg);
  overflow: hidden;
}

/* Dark Mode - Uses global theme */
:root[data-theme="dark"] #socials-feed-{{ section.id }}.socials-feed-section {
  --sf-bg: var(--color-bg);
  --sf-fg: var(--color-text);
  --sf-primary: var(--color-primary);
  --sf-primary-fg: var(--color-bg);
  --sf-muted: var(--color-bg-secondary);
  --sf-muted-fg: var(--color-text-muted);
  --sf-border: var(--color-border);
}

#socials-feed-{{ section.id }} .container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 24px;
}

@media (min-width: 768px) {
  #socials-feed-{{ section.id }} .container {
    padding: 0 32px;
  }
}

/* Header */
#socials-feed-{{ section.id }} .socials-feed__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 48px;
}

#socials-feed-{{ section.id }} .socials-feed__title {
  font-family: var(--ui-font-display, 'Bebas Neue', Impact, sans-serif);
  font-weight: 400;
  line-height: 1;
  letter-spacing: 0.02em;
  color: var(--sf-fg);
  margin: 0;
  font-size: clamp(2.25rem, 1.6rem + 2vw, 3.75rem);
}

#socials-feed-{{ section.id }} .socials-feed__instagram-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-family: var(--ui-font-display, 'Bebas Neue', Impact, sans-serif);
  font-size: 1.125rem;
  color: var(--sf-primary);
  text-decoration: none;
  transition: color 150ms ease;
}

#socials-feed-{{ section.id }} .socials-feed__instagram-link:hover {
  color: hsla(var(--ui-color-gold, 45 72% 47%), 0.8);
}

#socials-feed-{{ section.id }} .socials-feed__instagram-link span {
  text-decoration: underline;
  text-underline-offset: 4px;
  text-decoration-thickness: 2px;
}

/* Marquee wrapper */
#socials-feed-{{ section.id }} .socials-feed__marquee-wrapper {
  position: relative;
  overflow: hidden;
}

#socials-feed-{{ section.id }} .socials-feed__gradient {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 96px;
  z-index: 10;
  pointer-events: none;
}

@media (min-width: 768px) {
  #socials-feed-{{ section.id }} .socials-feed__gradient {
    width: 160px;
  }
}

#socials-feed-{{ section.id }} .socials-feed__gradient--left {
  left: 0;
  background: linear-gradient(to right, var(--sf-bg), transparent);
}

#socials-feed-{{ section.id }} .socials-feed__gradient--right {
  right: 0;
  background: linear-gradient(to left, var(--sf-bg), transparent);
}

/* Track */
#socials-feed-{{ section.id }} .socials-feed__marquee {
  display: flex;
  gap: 16px;
  width: max-content;
  will-change: transform;
  animation: socials-marquee 45s linear infinite;
  padding: 2px 0; /* breathing room for shadows */
}

@media (min-width: 768px) {
  #socials-feed-{{ section.id }} .socials-feed__marquee {
    gap: 24px;
  }
}

#socials-feed-{{ section.id }} .socials-feed__marquee:hover {
  animation-play-state: paused;
}

@keyframes socials-marquee {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* Cards */
#socials-feed-{{ section.id }} .socials-feed__card {
  flex-shrink: 0;
  position: relative;
  display: block;
  overflow: hidden;
  border-radius: 16px;
  border: 1px solid hsla(var(--ui-color-brown, 30 25% 15%), 0.08);
  box-shadow: 0 12px 28px -18px hsla(var(--ui-color-brown, 30 25% 15%), 0.35);
  background: var(--sf-muted);
}

@media (min-width: 768px) {
  #socials-feed-{{ section.id }} .socials-feed__card {
    border-radius: 24px;
  }
}

#socials-feed-{{ section.id }} .socials-feed__card-inner {
  position: relative;
  width: 256px;
  height: 256px;
  background: var(--sf-muted);
  overflow: hidden;
}

@media (min-width: 768px) {
  #socials-feed-{{ section.id }} .socials-feed__card-inner {
    width: 320px;
    height: 320px;
  }
}

#socials-feed-{{ section.id }} .socials-feed__card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transform: translateZ(0);
  transition: transform 500ms ease;
}

#socials-feed-{{ section.id }} .socials-feed__card:hover .socials-feed__card-image {
  transform: scale(1.1);
}

#socials-feed-{{ section.id }} .socials-feed__card-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--sf-muted);
}

#socials-feed-{{ section.id }} .socials-feed__card-placeholder .placeholder-svg {
  width: 44%;
  height: 44%;
  opacity: 0.35;
}

/* Hover overlay */
#socials-feed-{{ section.id }} .socials-feed__card-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  transition: background-color 300ms ease;
}

#socials-feed-{{ section.id }} .socials-feed__card:hover .socials-feed__card-overlay {
  background: hsla(var(--ui-color-gold, 45 72% 47%), 0.2);
}

#socials-feed-{{ section.id }} .socials-feed__card-icon {
  width: 40px;
  height: 40px;
  color: var(--sf-primary-fg);
  opacity: 0;
  transition: opacity 300ms ease;
  filter: drop-shadow(0 10px 18px hsla(var(--ui-color-brown, 30 25% 15%), 0.35));
}

#socials-feed-{{ section.id }} .socials-feed__card:hover .socials-feed__card-icon {
  opacity: 1;
}

/* CTA */
#socials-feed-{{ section.id }} .socials-feed__cta {
  text-align: center;
  margin-top: 48px;
}

#socials-feed-{{ section.id }} .socials-feed__cta-text {
  font-family: var(--ui-font-body, 'Inter', -apple-system, BlinkMacSystemFont, sans-serif);
  color: var(--sf-muted-fg);
  margin: 0 0 24px;
  max-width: 28rem;
  margin-inline: auto;
  line-height: 1.5;
  font-size: 1rem;
}

#socials-feed-{{ section.id }} .socials-feed__cta-highlight {
  color: var(--sf-primary);
  font-weight: 600;
}

#socials-feed-{{ section.id }} .socials-feed__cta-button {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  background: var(--sf-primary);
  color: var(--sf-primary-fg);
  font-family: var(--ui-font-display, 'Bebas Neue', Impact, sans-serif);
  font-size: 1.125rem;
  font-weight: 400;
  letter-spacing: 0.02em;
  padding: 16px 32px;
  border-radius: 9999px;
  text-decoration: none;
  transition: transform 300ms ease, background-color 300ms ease;
}

#socials-feed-{{ section.id }} .socials-feed__cta-button:hover {
  background: hsla(var(--ui-color-gold, 45 72% 47%), 0.9);
  transform: scale(1.05);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  #socials-feed-{{ section.id }} .socials-feed__marquee { animation: none; }
  #socials-feed-{{ section.id }} .socials-feed__card-image { transition: none; }
  #socials-feed-{{ section.id }} .socials-feed__cta-button { transition: none; }
}
</style>

<section 
  id="socials-feed-{{ section.id }}" 
  class="socials-feed-section"
>
  {%- if section.settings.show_header -%}
    <div class="socials-feed__header container">
      {%- if section.settings.title != blank -%}
        <h2 class="socials-feed__title">{{ section.settings.title }}</h2>
      {%- endif -%}
      {%- if section.settings.show_instagram_link and section.settings.instagram_url != blank -%}
        <a href="{{ section.settings.instagram_url }}" target="_blank" rel="noopener noreferrer" class="socials-feed__instagram-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
            <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
          </svg>
          <span>{{ section.settings.instagram_label }}</span>
        </a>
      {%- endif -%}
    </div>
  {%- endif -%}

  <div class="socials-feed__marquee-wrapper">
    {%- if section.settings.show_gradient_edges -%}
      <div class="socials-feed__gradient socials-feed__gradient--left"></div>
      <div class="socials-feed__gradient socials-feed__gradient--right"></div>
    {%- endif -%}

    <div class="socials-feed__marquee">
      {%- comment -%} First set of cards {%- endcomment -%}
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'image' -%}
            <a 
              href="{{ block.settings.link_url | default: section.settings.instagram_url }}" 
              target="_blank" 
              rel="noopener noreferrer"
              class="socials-feed__card"
              {{ block.shopify_attributes }}
            >
              <div class="socials-feed__card-inner">
                {%- if block.settings.image != blank -%}
                  {{ block.settings.image | image_url: width: 640 | image_tag:
                    loading: 'lazy',
                    class: 'socials-feed__card-image',
                    widths: '256, 320, 512, 640',
                    sizes: '(max-width: 768px) 256px, 320px'
                  }}
                {%- else -%}
                  <div class="socials-feed__card-placeholder">
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                {%- endif -%}
                <div class="socials-feed__card-overlay">
                  <svg class="socials-feed__card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
                  </svg>
                </div>
              </div>
            </a>
        {%- endcase -%}
      {%- endfor -%}

      {%- comment -%} Duplicate set for seamless loop {%- endcomment -%}
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'image' -%}
            <a 
              href="{{ block.settings.link_url | default: section.settings.instagram_url }}" 
              target="_blank" 
              rel="noopener noreferrer"
              class="socials-feed__card"
              aria-hidden="true"
            >
              <div class="socials-feed__card-inner">
                {%- if block.settings.image != blank -%}
                  {{ block.settings.image | image_url: width: 640 | image_tag:
                    loading: 'lazy',
                    class: 'socials-feed__card-image',
                    widths: '256, 320, 512, 640',
                    sizes: '(max-width: 768px) 256px, 320px'
                  }}
                {%- else -%}
                  <div class="socials-feed__card-placeholder">
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                {%- endif -%}
                <div class="socials-feed__card-overlay">
                  <svg class="socials-feed__card-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
                  </svg>
                </div>
              </div>
            </a>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>

  {%- if section.settings.show_cta -%}
    <div class="socials-feed__cta container">
      {%- if section.settings.cta_text != blank -%}
        <p class="socials-feed__cta-text">
          {{ section.settings.cta_text_before }} 
          {%- if section.settings.cta_highlight != blank -%}
            <span class="socials-feed__cta-highlight">{{ section.settings.cta_highlight }}</span>
          {%- endif -%}
          {{ section.settings.cta_text_after }}
        </p>
      {%- endif -%}
      {%- if section.settings.cta_button_text != blank and section.settings.cta_button_url != blank -%}
        <a href="{{ section.settings.cta_button_url }}" 
           class="socials-feed__cta-button"
           target="_blank" 
           rel="noopener noreferrer">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
            <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
          </svg>
          {{ section.settings.cta_button_text }}
        </a>
      {%- endif -%}
    </div>
  {%- endif -%}
</section>

{% schema %}
{
  "name": "Socials Feed",
  "tag": "section",
  "class": "socials-feed-section-wrapper",
  "settings": [
    {
      "type": "header",
      "content": "Header"
    },
    {
      "type": "checkbox",
      "id": "show_header",
      "label": "Toon header",
      "default": true
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titel",
      "default": "Socials"
    },
    {
      "type": "checkbox",
      "id": "show_instagram_link",
      "label": "Toon Instagram link",
      "default": true
    },
    {
      "type": "url",
      "id": "instagram_url",
      "label": "Instagram URL"
    },
    {
      "type": "text",
      "id": "instagram_label",
      "label": "Instagram label",
      "default": "Instagram"
    },
    {
      "type": "header",
      "content": "Carousel instellingen"
    },
    {
      "type": "checkbox",
      "id": "show_gradient_edges",
      "label": "Toon gradient randen",
      "default": true
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "checkbox",
      "id": "show_cta",
      "label": "Toon CTA sectie",
      "default": true
    },
    {
      "type": "text",
      "id": "cta_text_before",
      "label": "CTA tekst (voor highlight)",
      "default": "Deel jouw STËLZ moment en tag"
    },
    {
      "type": "text",
      "id": "cta_highlight",
      "label": "Highlight tekst",
      "default": "@drinkstelz"
    },
    {
      "type": "text",
      "id": "cta_text_after",
      "label": "CTA tekst (na highlight)",
      "default": "op Instagram"
    },
    {
      "type": "text",
      "id": "cta_button_text",
      "label": "CTA knop tekst",
      "default": "Volg @drinkstelz"
    },
    {
      "type": "url",
      "id": "cta_button_url",
      "label": "CTA knop URL"
    },
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Afbeelding",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Afbeelding"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL",
          "info": "Laat leeg voor standaard Instagram link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Socials Feed",
      "blocks": [
        { "type": "image" },
        { "type": "image" },
        { "type": "image" },
        { "type": "image" },
        { "type": "image" },
        { "type": "image" }
      ]
    }
  ]
}
{% endschema %}